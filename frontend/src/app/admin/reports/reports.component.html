<div class="report-container">
  <mat-tab-group>
    <mat-tab class="terminal" label="Terminal Report">
      <label for=""></label>
      <div class="btn-cont">
        <div>Pogram:</div>
        <div class="" *ngIf="!programTitle"></div>
        <div id="selected-program" *ngIf="programTitle">{{ programTitle }}</div>
        <div><button class="text-nowrap" (click)="selectProgram()">Select Program</button></div>
      </div>
      <div *ngIf="program && programFlow" class="table-container">
        <div class="table-wrapper">
          <table class="prog-flow" id="programFlow">
            <body>
              <div class="img-container">
                <img src="{{ assetPath }}assets/images/pdf-logo.png" alt="" />
              </div>

              <tr class="main-title">
                <th colspan="2" class="text-center">EXTENSION COMMUNITY INVOLVEMENT TERMINAL REPORT</th>
              </tr>
              <tr class="position-relative">
                <td colspan="2">&nbsp;</td>
              </tr>
              <tr class="program-name">
                <td class="flex-fill text-nowrap"><strong>Name of Activity / Project :</strong></td>
                <td>{{ program.title }}</td>
              </tr>
              <tr>
                <td class="flex-fill text-nowrap"><strong>Date and Place Conducted :</strong></td>
                <td>
                  {{ program.place }} - <span *ngIf="program.start_date == program.end_date">{{ program.start_date | date : 'longDate' }}</span
                  ><span *ngIf="program.start_date != program.end_date"></span> {{ program.start_date | date : 'longDate' }} -
                  {{ program.end_date | date : 'longDate' }}
                </td>
              </tr>
              <tr>
                <td colspan="2">&nbsp;</td>
              </tr>
              <tr>
                <td colspan="2"><strong>Faculty Involved : </strong></td>
              </tr>
              <!-- list of members  -->
              <tr *ngFor="let item of programFlow.position; let i = index">
                <td class="text-end w-45">{{ [i + 1] }}.</td>
                <td class="text-start w-55">{{ item.name }} - {{ item.position }}</td>
              </tr>
              <tr>
                <td colspan="2"><strong> Beneficiaries :</strong></td>
              </tr>
              <!-- list of Partner  -->
              <tr *ngFor="let item of program.partners">
                <td colspan="2" class="text-center">
                  <strong>{{ item.name }}</strong>
                </td>
              </tr>
              <tr>
                <td colspan="2">&nbsp;</td>
              </tr>
              <tr>
                <td colspan="2" class="flex-fill text-nowrap"><strong>Report on the flow of the Activity / Project Conducted :</strong></td>
              </tr>
              <tr>
                <td colspan="2">&nbsp;</td>
              </tr>
              <tr>
                <td colspan="2" class="ps-4 pe-4">
                  <textarea
                    class="border-0 w-100 p-4"
                    name=""
                    id=""
                    cols="30"
                    rows="3"
                    placeholder="As part of the University Extension Services, the CICT participated in the annual SAMBALARAN: ONLINE CAMP PROJECT on its sixth year with the theme: 'Educating the Educators 2.0: Empowering Teachers for the Adversities in the NOW Normal Education'. "
                  ></textarea>
                </td>
              </tr>
              <tr>
                <td colspan="2">&nbsp;</td>
              </tr>
              <tr>
                <td colspan="2">
                  This event happen on {{ program.start_date | date : 'longDate' }}
                  <span *ngIf="program.start_time && program.end_time">from {{ program.start_time }} - {{ program.end_time }}</span> .The program flow
                  is as follows:
                </td>
              </tr>
              <tr>
                <td colspan="2">&nbsp;</td>
              </tr>
              <tr>
                <td colspan="2" class="px-5">
                  <table class="table border">
                    <thead>
                      <tr>
                        <th colspan="2" class="text-center">Program Flow</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of programFlow.flow">
                        <td class="border text-end w-50">{{ item.flow }}</td>
                        <td class="border text-start w-50">{{ item.description }}</td>
                      </tr>
                    </tbody>
                  </table>
                </td>
              </tr>
              <div class="footer">
                <div>Printed By : {{ adminName }}&nbsp;&nbsp;|&nbsp;&nbsp;{{ adminRole }}</div>
                <div>{{ currentDate | date : 'longDate' }}</div>
              </div>
            </body>
          </table>
        </div>
      </div>
      <!--






       -->
      <div *ngIf="program && programFlow" class="table-container">
        <div class="table-wrapper">
          <table class="prog-flow" id="programTopic">
            <body>
              <div class="img-container">
                <img src="{{ assetPath }}assets/images/pdf-logo.png" alt="" />
              </div>

              <tr class="main-title">
                <td colspan="2" class="text-center">
                  <p class="topic-p" style="text-align: left">
                    The team prepared sufficient and relevant topics for
                    <input #myInput type="text" [(ngModel)]="inputValue" [style.width.px]="calculateWidth()" />

                    <br />
                    Below is the outline of all the topics discussed during the learning session
                  </p>
                </td>
              </tr>
              <tr class="position-relative">
                <td colspan="2">&nbsp;</td>
              </tr>
              <tr class="program-name">
                <td>
                  <table class="border">
                    <tbody>
                      <tr class="border">
                        <td class="text-center"><strong>Blend Your Classrooms</strong></td>
                        <td class="text-center"><strong>Links to Slideshow Section</strong></td>
                        <td class="text-center"><strong>Brief Description</strong></td>
                      </tr>
                      <tr class="border" *ngFor="let item of programFlow.topic">
                        <td class="p-2">{{ item.col_1 }}</td>
                        <td class="p-2">{{ item.col_2 }}</td>
                        <td class="p-2">{{ item.col_3 }}</td>
                      </tr>
                    </tbody>
                  </table>
                </td>
              </tr>
              <tr>
                <td colspan="2">&nbsp;</td>
              </tr>
              <tr>
                <td colspan="2"><strong>Prepared by : </strong></td>
              </tr>
              <tr>
                <td colspan="2" class="w-100">
                  <table class="border w-100">
                    <tbody>
                      <tr class="border">
                        <td class="text-center w-70">
                          <strong>Name</strong>
                        </td>
                        <td class="text-center w-30">
                          <strong>Signature</strong>
                        </td>
                      </tr>
                      <tr class="border" *ngFor="let item of programFlow.position">
                        <td class="border text-center w-70">{{ item.name }}-{{ item.position }}</td>
                        <td class="border w-30"></td>
                      </tr>
                    </tbody>
                  </table>
                </td>
              </tr>
              <tr>
                <td colspan="2">&nbsp;</td>
              </tr>
              <tr>
                <td>Conforme:</td>
              </tr>
              <tr>
                <td><strong>DR. KENO C. PIAD</strong></td>
              </tr>
              <tr>
                <td>Dean, CICT</td>
              </tr>
              <div class="footer">
                <div>Printed By : {{ adminName }}&nbsp;&nbsp;|&nbsp;&nbsp;{{ adminRole }}</div>
                <div>{{ currentDate | date : 'longDate' }}</div>
              </div>
            </body>
          </table>
        </div>
      </div>
      <div class="dl-cont" *ngIf="program && programFlow">
        <div class="downloadbtn"><i class="fa-solid fa-circle-down"></i><button (click)="downloadPDF()">Download PDF</button></div>
      </div>
    </mat-tab>

    <!--










     -->
    <mat-tab label="Partner Report">
      <div class="dlpartnerbtn flex-wrap">
        <mat-form-field appearance="outline">
          <mat-label>Filter</mat-label>
          <mat-select (selectionChange)="applyFilter($event.value)">
            <mat-option value="all">All</mat-option>
            <mat-option value="active">Active Contracts</mat-option>
            <mat-option value="expired">Expired Contracts</mat-option>
          </mat-select>
        </mat-form-field>

        <div class="downloadbtn">
          <i class="fa-solid fa-circle-down"></i><button class="text-nowrap" (click)="downloadPartnerPDF()">Download PDF</button>
        </div>
      </div>

      <div class="partner-management">
        <div class="tablewrapper">
          <table mat-table [dataSource]="dataSource" matSort #sort="matSort" class="mat-elevation-z8" id="partner_table">
            <!-- Company Name Column -->
            <ng-container matColumnDef="company_name">
              <th mat-header-cell *matHeaderCellDef mat-sort-header class="ps-3">Partner Name</th>
              <td mat-cell *matCellDef="let dataSource">{{ dataSource.company_name }}</td>
            </ng-container>

            <!-- Address Column -->
            <ng-container matColumnDef="address">
              <th mat-header-cell *matHeaderCellDef mat-sort-header class="ps-3">ADDRESS</th>
              <td mat-cell *matCellDef="let dataSource">{{ dataSource.address }}</td>
            </ng-container>

            <!-- Contact Number Column -->
            <ng-container matColumnDef="contact_no">
              <th mat-header-cell *matHeaderCellDef class="ps-3">CONTACT NUMBER</th>
              <td mat-cell *matCellDef="let dataSource">{{ dataSource.contact_no }}</td>
            </ng-container>

            <!-- Contract Dates Column -->
            <ng-container matColumnDef="contract_dates">
              <th mat-header-cell *matHeaderCellDef mat-sort-header class="ps-3">CONTRACT DATES</th>
              <td mat-cell *matCellDef="let dataSource">
                {{ formatDate(dataSource.contracts.start_date) }} -
                {{ formatDate(dataSource.contracts.end_date) }}
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            <tr class="mat-row" *matNoDataRow>
              <td class="mat-cell" colspan="4">No data matching the filter</td>
            </tr>
          </table>
        </div>
      </div>
    </mat-tab>

    <mat-tab label="Faculty Report">
      <div class="dlpartnerbtn d-flex flex-wrap">
        <div class="btn-cont">
          <div>Pogram:</div>
          <div class="" *ngIf="!facultyName"></div>
          <div id="selected-program" *ngIf="facultyName">{{ facultyName }}</div>
          <div><button class="text-nowrap" (click)="selectFaculty()">Select Faculty</button></div>
        </div>
        <div class="btn-cont d-flex justify-content-end">
          <div class="downloadbtn">
            <i class="fa-solid fa-circle-down"></i><button class="text-nowrap" (click)="downloadFacultyPDF()">Download PDF</button>
          </div>
        </div>
      </div>
      <div class="partner-management">
        <div class="tablewrapper">
          <table mat-table [dataSource]="facultyDataSource" matSort #sort2="matSort" class="mat-elevation-z8" id="faculty_table">
            <!-- Company Name Column -->
            <ng-container matColumnDef="title">
              <th mat-header-cell *matHeaderCellDef mat-sort-header class="ps-3">Title</th>
              <td mat-cell *matCellDef="let facultyDataSource">{{ facultyDataSource.title }}</td>
            </ng-container>

            <!-- Address Column -->
            <ng-container matColumnDef="place">
              <th mat-header-cell *matHeaderCellDef mat-sort-header class="ps-3">Place</th>
              <td mat-cell *matCellDef="let facultyDataSource">{{ facultyDataSource.place }}</td>
            </ng-container>

            <!-- Contact Number Column -->
            <ng-container matColumnDef="start_date">
              <th mat-header-cell *matHeaderCellDef mat-sort-header class="ps-3">Start Date</th>
              <td mat-cell *matCellDef="let facultyDataSource">
                {{ formatDate(facultyDataSource.start_date) }}
              </td>
            </ng-container>

            <ng-container matColumnDef="end_date">
              <th mat-header-cell *matHeaderCellDef mat-sort-header class="ps-3">End Date</th>
              <td mat-cell *matCellDef="let facultyDataSource">
                {{ formatDate(facultyDataSource.end_date) }}
              </td>
            </ng-container>

            <!-- Contract Dates Column -->
            <ng-container matColumnDef="status">
              <th mat-header-cell *matHeaderCellDef mat-sort-header class="ps-3">Status</th>
              <td mat-cell *matCellDef="let facultyDataSource">
                {{ facultyDataSource.status }}
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="facultyDisplayedColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: facultyDisplayedColumns"></tr>
            <tr class="mat-row" *matNoDataRow>
              <td class="mat-cell" colspan="4">No data matching the filter</td>
            </tr>
          </table>
        </div>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
